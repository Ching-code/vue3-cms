import{_ as v}from"./PageContainer-BYH_WVdG.js";import{q as p,s as b,t as E,o as V,a as x,w as a,x as s,y as _,b_ as k,E as U}from"./index-De9NTWpX.js";import{E as S,a as y}from"./el-form-item-C1vIZT5c.js";import{E as P}from"./el-message-C2WCIJQU.js";import{E as q}from"./el-input-CkUAhBj-.js";import"./_baseClone-DUDG7X5p.js";const T={__name:"UserPassword",setup(C){const u=p(),r=p({old_password:"",new_password:"",re_password:""}),n=b(),i=E(),w={old_password:[{required:!0,message:"請輸入原密碼",trigger:"blur"},{min:6,max:15,message:"密碼長度為 6-15 位",trigger:"blur"}],new_password:[{required:!0,message:"請輸入新密碼",trigger:"blur"},{min:6,max:15,message:"密碼長度為 6-15 位",trigger:"blur"},{validator:(d,e,o)=>{e===r.value.old_password?o(new Error("新密碼不得與原密碼相同")):o()},trigger:"blur"}],re_password:[{required:!0,message:"請確認新密碼",trigger:"blur"},{min:6,max:15,message:"密碼長度為 6-15 位",trigger:"blur"},{validator:(d,e,o)=>{e!==r.value.new_password?o(new Error("密碼不一致")):o()},trigger:"blur"}]},f=async()=>{await u.value.validate(),await k(r.value),U.success("修改成功"),n.setToken(""),n.setUser({}),i.push("/login")};return(d,e)=>{const o=q,t=S,m=P,g=y,c=v;return V(),x(c,{title:"重置密碼"},{default:a(()=>[s(g,{ref_key:"formRef",ref:u,model:r.value,rules:w,"label-width":"100px"},{default:a(()=>[s(t,{label:"原密碼",prop:"old_password"},{default:a(()=>[s(o,{modelValue:r.value.old_password,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.old_password=l),"show-password":""},null,8,["modelValue"])]),_:1}),s(t,{label:"新密碼",prop:"new_password"},{default:a(()=>[s(o,{modelValue:r.value.new_password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.new_password=l),"show-password":""},null,8,["modelValue"])]),_:1}),s(t,{label:"確認新密碼",prop:"re_password"},{default:a(()=>[s(o,{modelValue:r.value.re_password,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.re_password=l),"show-password":""},null,8,["modelValue"])]),_:1}),s(t,null,{default:a(()=>[s(m,{onClick:f,type:"primary"},{default:a(()=>[_("修改密碼")]),_:1}),s(m,{onClick:e[3]||(e[3]=l=>u.value.resetFields())},{default:a(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{T as default};
