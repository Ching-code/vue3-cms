import{_ as U}from"./PageContainer-BYH_WVdG.js";import{s as w,q as _,o,a as i,w as t,x as s,L as E,e as r,z as x,y as p,E as d,bN as A,C as B,aT as f,bO as C}from"./index-De9NTWpX.js";import{_ as S,E as b}from"./el-message-C2WCIJQU.js";import{E as h}from"./el-progress-C6DpfE4E.js";import"./_baseClone-DUDG7X5p.js";import"./isEqual-D5yLMI5-.js";const N=["src"],R={class:"buttons"},z={__name:"UserAvatar",setup(V){const n=w(),a=_(n.user.user_pic),l=_(),m=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{a.value=e.result}},v=async()=>{if(!a.value){d.warning("請選擇頭像");return}await A(a.value),await n.getUser(),d.success("更換成功")};return(c,e)=>{const g=B,k=h,u=b,y=U;return o(),i(y,{title:"修改用戶頭像"},{default:t(()=>[s(k,{ref_key:"uploadRef",ref:l,class:"avatar-uploader","auto-upload":!1,"show-file-list":!1,"on-change":m},{default:t(()=>[a.value?(o(),E("img",{key:0,src:a.value,class:"avatar"},null,8,N)):(o(),i(g,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[s(r(f))]),_:1}))]),_:1},512),x("div",R,[s(u,{onClick:e[0]||(e[0]=q=>l.value.$el.querySelector("input").click()),icon:r(f),size:"large",type:"primary"},{default:t(()=>[p("選擇頭像")]),_:1},8,["icon"]),s(u,{onClick:v,icon:r(C),size:"large",type:"success"},{default:t(()=>[p("上傳頭像")]),_:1},8,["icon"])])]),_:1})}}},M=S(z,[["__scopeId","data-v-c85c32aa"]]);export{M as default};
